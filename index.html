<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>경사남넷-소개페이지</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');


        * {
            font-family: "Jua", sans-serif;
            font-weight: 400;
            font-style: normal;
        }


        /*삼대장 이미지 배너 style*/
        .meam {
            height: 700px;
            background-image:
                url(https://blog.kakaocdn.net/dn/dN9KlG/btqwWo4cjmE/lsXvkMBkTTLZqnOpT1Wupk/img.jpg);
            background-position: center;
            background-size: cover;
            border: 3px outset;
        }

        /*경서남넷 타이틀 바 */
        .mytitle {
            height: 100px;
            color: black;
            /*글자 외곽 테두리*/
            text-shadow: -1px 0px white, 0px 1px white, 1px 0px white, 0px -1px white;

            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;

            background-image:
                url(https://cdn-icons-png.flaticon.com/512/4372/4372820.png);
            background-position: center;
            background-size: 10%;
        }



        .mycards {
            width: 1200px;
            margin: 30px auto 0px auto;
        }

        .commentingbox {

            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;

            margin: 30px auto 0px auto;
        }

        /*팀원 카드형 자기소개 style*/
        .miniinfo {
            border: 3px outset;
            background-image:
                url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4IgfcfKetAn4S4nQ-kg0Ih2fuBBWDdiI34A&s);
            background-position: center;
            background-size: 10%;

        }


        .card {
            margin: 0 auto;
        }

        /*텍스트에어리어 style 부분*/
        .teaminfo {
            border: 3px outset;
            background-color: beige;
        }

        .goal {
            border: 3px outset;
            background-color: beige;
        }

        .mycards {
            width: 1200px;

            margin: 30px auto 0px auto;
        }




        /*아래는 댓글 관련 css*/


        /* 댓글 입력 구역 너비*/
        #comment {
            width: 1000px;

        }

        /* 댓글 작성 버튼 스타일 , jQuery 이용을 위한 id 값 부여*/
        #postingbtn {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            height: 55px;
            margin-bottom: 16px;
        }







        /* 댓글 테이블 스타일*/
        table {
            width: 70%;
            border-collapse: separate;
            border-spacing: 10;
            margin: 20px auto;
            border: none;
            border-radius: 5px;
            overflow: hidden;

        }

        table th,
        table td {
            border: 0.5px solid black;
            padding: 5px;
            text-align: center;
            border-radius: 5px;


        }


        /*짝수줄, 홀수줄 마다 색을 다르게 함, 타이틀 바 색깔 설정*/
        thead {
            background-color: #6d4f2c;
            color: white;
        }

        

        /* 댓글 내용과 삭제 버튼 정렬 */
        .comment-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }



        /*댓글 페이지 뒷 배경 설정*/
        .comment-space {
            background-image: url(https://i.pinimg.com/1200x/a8/ef/cd/a8efcd85adf5fde3bb76832bea40fdd1.jpg);
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: scroll;
            margin: 30px auto 0px auto;
            width: 100%;
            padding: 20px;
            border-radius: 8px;
            
        }







        /* 테이블의 작성자 스타일*/
        .name-column {
            width: 20%;

        }

        /*테이블의 내용 스타일*/
        .content-column {
            width: 70%;

        }

        /* 세 번째 컬럼의 테두리 제거 */
        .action-column {
            width: 10%;
            text-align: center;
            border: none;

        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">

        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA9pQiIwlqJTL-3TSQEZVLZ3UDHC9D16FY",
            authDomain: "sparta-930ba.firebaseapp.com",
            projectId: "sparta-930ba",
            storageBucket: "sparta-930ba.appspot.com",
            messagingSenderId: "389048733686",
            appId: "1:389048733686:web:c4b543e7955288c4f801d7",
            measurementId: "G-QEPKG50DSH"
        };

        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        $("#postingbtn").click(async function () { // 데이터를 넣기 위함 (특정 태그 클릭 시 실행)

            let name = $('#name').val();
            let comment = $('#comment').val();

            let doc = {
                'name': name,
                'comment': comment,

            }; // 넣고 싶은 데이터
            await addDoc(collection(db, "comments"), doc);
            alert('작성 되었습니다.');
            window.location.reload();
        })





        $(document).ready(async function () {
            let docs = await getDocs(collection(db, "comments"));
            let commentCount = 0;

            docs.forEach((doc) => {
                commentCount++;
                let row = doc.data();
                let name = row['name'];
                let comment = row['comment'];
                let docId = doc.id;

                let temp_html = `
                    <tr id="comment-${docId}">
                        <td>${name}</td>
                        <td id="comment-area">${comment}
                            </td>
                            <td class="action-column"><button class="btn btn-danger" data-id="${docId}" id="delete-btn">삭제</button></td>
                    </tr>
                    
                    
                `;
                $('#comments').append(temp_html);
            });

            if (commentCount === 0) {
                $('table').hide();
            } else {
                $('table').show();
            }
        });


        // 삭제 기능 구현
        $(document).on('click', '#delete-btn', async function () {


            let answer = confirm('정말로 삭제하시겠습니까?');
            if (answer) {
                let docId = $(this).data('id');
                await deleteDoc(doc(db, "comments", docId));
                $(`comment-${docId}`).remove();
                alert('삭제되었습니다.');
                window.location.reload();

            }
            else {
                alert('삭제를 취소합니다.');
            }




        });


    </script>
</head>

<body>
    <div class="mytitle">
        <h1>경 사 남 넷</h1>

    </div>

    <div class="meam">
    </div>
    <!-- 팀원 자기소개 카드 부분 style을 최적화를 못해서 따로말해주시면 제가 바꾸겠습니다.-->
    <div class="miniinfo">
        <div class="row row-cols-1 row-cols-md-5 g4">
            <div class="card" style="width: 18rem; border: 3px outset; background-color: rgb(230, 129, 7);">
                <h5 class="card-title" style="border: 3px outset;">Card title</h5>
                <p class="star">⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐</p>
                <img src="https://i.namu.wiki/i/mVbvSl2j-zdEzqQQgq8RX1Sv7TUUlzR41DjSQfdOzgVDdMLRQyZ2VtCXE2HyX1DW0lMOuE6BeUwzaW9ETAGT2g.webp"
                    class="card-img-top" alt="..." style="border: 3px outset;">
                <div class="card-body" style="border: 3px outset;">
                    <p class="card-text" style="border: 3px outset; background-color: beige;">이 카드는 그냥 개발을 잘함
                    </p>
                    <a href="#" class="btn btn-primary"
                        style="height: 20px; display: flex; font-size: 10px; float: right; color: black; background-color: beige;">ATK/?
                        DEF/?</a>
                </div>
            </div>
            <div class="card" style="width: 18rem; border: 3px outset; background-color: rgb(230, 129, 7);">
                <h5 class="card-title" style="border: 3px outset;">Card title</h5>
                <p class="star">⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐</p>
                <img src="https://i.namu.wiki/i/mVbvSl2j-zdEzqQQgq8RX1Sv7TUUlzR41DjSQfdOzgVDdMLRQyZ2VtCXE2HyX1DW0lMOuE6BeUwzaW9ETAGT2g.webp"
                    class="card-img-top" alt="..." style="border: 3px outset;">
                <div class="card-body" style="border: 3px outset;">
                    <p class="card-text" style="border: 3px outset; background-color: beige;">이 카드는 그냥 개발을 잘함
                    </p>
                    <a href="#" class="btn btn-primary"
                        style="height: 20px; display: flex; font-size: 10px; float: right; color: black;background-color: beige;">ATK/?
                        DEF/?</a>
                </div>
            </div>
            <div class="card" style="width: 18rem; border: 3px outset; background-color: rgb(230, 129, 7);">
                <h5 class="card-title" style="border: 3px outset;">Card title</h5>
                <p class="star">⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐</p>
                <img src="https://i.namu.wiki/i/mVbvSl2j-zdEzqQQgq8RX1Sv7TUUlzR41DjSQfdOzgVDdMLRQyZ2VtCXE2HyX1DW0lMOuE6BeUwzaW9ETAGT2g.webp"
                    class="card-img-top" alt="..." style="border: 3px outset;">
                <div class="card-body" style="border: 3px outset;">
                    <p class="card-text" style="border: 3px outset; background-color: beige;">이 카드는 그냥 개발을 잘함
                    </p>
                    <a href="#" class="btn btn-primary"
                        style="height: 20px; display: flex; font-size: 10px; float: right; color: black;background-color: beige;">ATK/?
                        DEF/?</a>
                </div>
            </div>
            <div class="card" style="width: 18rem; border: 3px outset; background-color: rgb(230, 129, 7);">
                <h5 class="card-title" style="border: 3px outset;">Card title</h5>
                <p class="star">⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐⭐</p>
                <img src="https://i.namu.wiki/i/mVbvSl2j-zdEzqQQgq8RX1Sv7TUUlzR41DjSQfdOzgVDdMLRQyZ2VtCXE2HyX1DW0lMOuE6BeUwzaW9ETAGT2g.webp"
                    class="card-img-top" alt="..." style="border: 3px outset;">
                <div class="card-body" style="border: 3px outset;">
                    <p class="card-text" style="border: 3px outset; background-color: beige;">이 카드는 그냥 개발을 잘함
                    </p>
                    <a href="#" class="btn btn-primary"
                        style="height: 20px; display: flex; font-size: 10px; float: right; color: black;background-color: beige;">ATK/?
                        DEF/?</a>
                </div>
            </div>

        </div>
    </div>
    <!-- 팀 설명란 CSS는 자유롭게 바꾸시면될거같습니다.-->
    <div class="teaminfo">
        <h2 style="border: 3px outset;background-color: rgb(230, 129, 7);">팀 설 명</h2>
        <h2>경상도와 경기도라는 먼 지역에서 만났지만 마치 예전부터 알고 지냈던 사람처럼 화목하게 지내면서 프로젝트에 열정적으로 참여하는 모습에 이렇게 만난 것이 행운이 아닌가 싶은 기쁜 마음에
            ‘경사났네’를 표현하는 말입니다. 그리고 팀명을 통해서 좋은 결과를 만들어 내자는 각오를 의미하고 있습니다. </h2>
    </div>
    <!-- 목표부분.-->
    <div clsas="goal">
        <h2>목표나 한마디</h2>
        <h3>
            <pre>
                박태우:
                윤영한:
                이지훈:
                조성준:
            </pre>
        </h3>
    </div>
    <!-- 팀규칙 부분.-->
    <div class="teamPromise">
        <h2>우리팀의 규칙</h2>
        <h3>
            <pre>
                1.
                2.
                3.
                4.
</h3></pre>
    </div>



    <!-- 방명록기능-->
    <div class="comment-space">
        <div>
            <h2 style="text-align: center; margin-bottom: 100px;">댓글</h2>
            <div class="commentingbox" id="commentbox">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="name" placeholder="이름 또는 닉네임">
                    <label for="floatingInput">이름 또는 닉네임</label>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="comment" placeholder="댓글 작성">
                    <label for="floatingInput">댓글</label>
                </div>
                <div class="mybtn">
                    <button id="postingbtn" type="button" class="btn btn-primary">작성하기</button>
                </div>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th class="name-column">작성자</th>
                    <th class="content-column">내용</th>
                </tr>
            </thead>
            <tbody id="comments">

            </tbody>
        </table>
</body>

</html>
</div>
</body>

</html>